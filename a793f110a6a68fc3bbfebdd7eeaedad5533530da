{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "99eeec1b_5ad56c21",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1001562
      },
      "writtenOn": "2025-04-02T18:31:33Z",
      "side": 1,
      "message": "Frank, George: Please review patchset 4. Thanks!",
      "revId": "a793f110a6a68fc3bbfebdd7eeaedad5533530da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e31d38ac_50a0576a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1571352
      },
      "writtenOn": "2025-04-02T20:10:34Z",
      "side": 1,
      "message": "lgtm, thanks!",
      "revId": "a793f110a6a68fc3bbfebdd7eeaedad5533530da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f00188e6_2cb427e3",
        "filename": "CMakeLists.txt",
        "patchSetId": 4
      },
      "lineNbr": 123,
      "author": {
        "id": 1115898
      },
      "writtenOn": "2025-04-02T21:00:14Z",
      "side": 1,
      "message": "to be clear, we are doing this due to an issue in gcc 9 that is fixed in gcc 10+ ?",
      "fixSuggestions": [
        {
          "fixId": "6ecae390_2d03dc3f",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "CMakeLists.txt",
              "range": {
                "startLine": 122,
                "startChar": 0,
                "endLine": 124,
                "endChar": 0
              },
              "replacement": "    # technically wrong. GCC 9 and earlier incorrectly allowed SVE2 to be\n    # enabled with -march\u003darmv8.5-a, but this was fixed in GCC 10. Use\n    # -march\u003darmv9-a+i8mm+sve2 instead when we drop support for gcc 10.\n"
            }
          ]
        }
      ],
      "revId": "a793f110a6a68fc3bbfebdd7eeaedad5533530da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8d97e992_7668cc33",
        "filename": "CMakeLists.txt",
        "patchSetId": 4
      },
      "lineNbr": 123,
      "author": {
        "id": 1001562
      },
      "writtenOn": "2025-04-02T21:38:41Z",
      "side": 1,
      "message": "I got this change second-handed. I think gcc 10 is known to not accept `-march\u003darmv9-a+i8mm+sve2`. Since we need to support gcc 10, we have to use `-march\u003darmv8.5-a+i8mm+sve2`.\n\nI don\u0027t know if `-march\u003darmv9-a+i8mm+sve2` is supported by gcc 11.\n\nWould you like me to rewrite this comment so that we only say what we know?\n\n```\n    # SVE2 is an Arm v9-only feature. gcc 10 does not support\n    # -march\u003darmv9-a+i8mm+sve2. Use -march\u003darmv8.5-a+i8mm+sve2,\n    # which is technically wrong, for compatibility with gcc 10.\n```",
      "parentUuid": "f00188e6_2cb427e3",
      "revId": "a793f110a6a68fc3bbfebdd7eeaedad5533530da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2af3cb6f_11ef3988",
        "filename": "CMakeLists.txt",
        "patchSetId": 4
      },
      "lineNbr": 123,
      "author": {
        "id": 1001562
      },
      "writtenOn": "2025-04-02T23:30:03Z",
      "side": 1,
      "message": "I did some more Web searches for this topic. Here are my findings.\n\n`+i8mm` and `+sve2` first appeared in GCC 10. `-march\u003darmv9-a` first appeared in GCC 12. So we can use `-march\u003darmv8.5-a+i8mm+sve2` with GCC 10 or later, and we can use `-march\u003darmv9-a+i8mm+sve2` with GCC 12 or later.\n\nhttps://gcc.gnu.org/onlinedocs/gcc-9.5.0/gcc/AArch64-Options.html\nhttps://gcc.gnu.org/onlinedocs/gcc-10.5.0/gcc/AArch64-Options.html\nhttps://gcc.gnu.org/onlinedocs/gcc-11.5.0/gcc/AArch64-Options.html\nhttps://gcc.gnu.org/onlinedocs/gcc-12.4.0/gcc/AArch64-Options.html\n\nAnd an official Arm blog post tells people to use `-march\u003darmv8.5-a+sve2`, so I removed the comment I added in patchset 4:\nhttps://community.arm.com/arm-community-blogs/b/tools-software-ides-blog/posts/making-the-most-of-the-arm-architecture-in-gcc-10\n\nGeorge: GCC manual also says +sve2 is included by default in `-march\u003darmv9-a`. Does this mean `-march\u003darmv9-a+i8mm+sve2` can be shortened to `-march\u003darmv9-a+i8mm`?",
      "parentUuid": "8d97e992_7668cc33",
      "revId": "a793f110a6a68fc3bbfebdd7eeaedad5533530da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "eb7e03de_b2586d03",
        "filename": "CMakeLists.txt",
        "patchSetId": 4
      },
      "lineNbr": 123,
      "author": {
        "id": 1571352
      },
      "writtenOn": "2025-04-03T08:52:42Z",
      "side": 1,
      "message": "Indeed it seems like GCC 12 is the first one that accepts -march\u003darmv9-a: https://godbolt.org/z/zh8fe1rWM , LLVM accepts it from LLVM 14: https://godbolt.org/z/c7aTajo6K .\n\nI have a weak preference against simplifying the command line to remove the explicit +sve2 extension. The architecture specification is somewhat vague here, stating that SVE2 is technically optional in Arm v9.0-A but mandatory for \"All Armv9-A systems that support standard operating\nsystems with rich application environments\". You can see some related discussions on the LLVM project here: https://github.com/llvm/llvm-project/issues/114987 .\n\nAt the time we started writing SVE2 code to put upstream there wasn\u0027t an obvious consensus about whether -march\u003darmv9-a by itself would continue to enable SVE2 in newer compilers, so it was safer to keep +sve2 explicitly enabled. It appears that now this is mostly settled in favour of the status-quo so it\u0027s probably okay to be removed now if it ends up being problematic to keep it.",
      "parentUuid": "2af3cb6f_11ef3988",
      "revId": "a793f110a6a68fc3bbfebdd7eeaedad5533530da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "87f31e95_d61583e2",
        "filename": "CMakeLists.txt",
        "patchSetId": 4
      },
      "lineNbr": 123,
      "author": {
        "id": 1001562
      },
      "writtenOn": "2025-04-03T19:58:11Z",
      "side": 1,
      "message": "Thank you, George, for the reply. I will keep the explicit `+sve2` extension in `-march\u003darmv9-a+i8mm+sve2`.",
      "parentUuid": "eb7e03de_b2586d03",
      "revId": "a793f110a6a68fc3bbfebdd7eeaedad5533530da",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}
{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "cad79541_2b99544a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 29
      },
      "lineNbr": 0,
      "author": {
        "id": 1001562
      },
      "writtenOn": "2025-02-26T00:30:20Z",
      "side": 1,
      "message": "Frank: This CL is still too big to review. It still contains some formatting changes, which make it even bigger. I did my best to skim through the whole CL.",
      "revId": "b5d4b66fa33ddd961ca4648623aca2024a029075",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b7df5835_94d0f2da",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 29
      },
      "lineNbr": 0,
      "author": {
        "id": 1115898
      },
      "writtenOn": "2025-02-26T17:51:11Z",
      "side": 1,
      "message": "There are 2 changes in addition to J444\nformatting for J444\nenabling row_win for J444\n\nDuring the review, James suggested \"\" // to avoid lines causing indent, so I applied that where I use //\nI did the change to the relevant functions - RGBTOUV, but anything that followed the same pattern.  There are more formatting issues\nIf we need this to be outside the review, either the formatting could be removed, or another CL to attempt to mimic the J444 formatting changes\n\nThe other big change is row_win is partially updated and tested, but to test I build row_win with clang.  Both aspects caused a number of small changed.\nThe VC version was not passing tests (on try bots).  I couldnt build with VC - furthest I got was cmake can build the library, but not the tests.\nSo I did the clangcl approach of building with lexan.  The logic for each set of \u0027HAS\u0027 macros needed an update.\nUnresolved is why I420Alpha and Rotate functions fail tests when build with clang, but they are disabled.  Follow up needed to re-enable all row_win functions and port them to 8 bit accuracy.\nI did to a series of tests\n32 bit with and without exact\n64 bit with and without exact\nGetting row_win to build was pretty complicated, but in theory a new CL could focus on just this.\nOne idea of the change, is that Y and UV can be enabled seperately.  So the calling functions need to respect HAS_UV seperately from HAS_Y\nIn row_win a number of functions were reusing constants from functions that were disabled.  In row_win its not entirely necessary to disable functions being generated... the only reason to do that is old compiles that do not support new instructions.  But we\u0027re using fairly old ISA on Intel.",
      "parentUuid": "cad79541_2b99544a",
      "revId": "b5d4b66fa33ddd961ca4648623aca2024a029075",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7a42206b_ce3bd285",
        "filename": "include/libyuv/compare_row.h",
        "patchSetId": 29
      },
      "lineNbr": 25,
      "author": {
        "id": 1001562
      },
      "writtenOn": "2025-02-26T00:30:20Z",
      "side": 1,
      "message": "Is the location of `!defined(LIBYUV_ENABLE_ROWWIN)` correct?\n\nPlease compare with line 42 and line 49, which adds `!defined(LIBYUV_ENABLE_ROWWIN)` outside `(defined(__x86_64__) || defined(__i386__))`. Following that pattern, this should be:\n\n```\n#if !defined(LIBYUV_DISABLE_X86) \u0026\u0026 \\\n    (defined(__x86_64__) || defined(__i386__) || defined(_M_IX86)) \u0026\u0026 \\\n    !defined(LIBYUV_ENABLE_ROWWIN)\n```",
      "revId": "b5d4b66fa33ddd961ca4648623aca2024a029075",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "728ca065_34defaac",
        "filename": "include/libyuv/compare_row.h",
        "patchSetId": 29
      },
      "lineNbr": 25,
      "author": {
        "id": 1115898
      },
      "writtenOn": "2025-02-26T17:51:11Z",
      "side": 1,
      "message": "This file is fairly typical, in that it has assembly for:\nclang 32 bit and 64 bit - compare_gcc.cc\nvisual c 32 bit - compare_win.cc\nit does not have visual c 64 bit.\nso overall it says this header applies to 64 bit clang, unless LIBYUV_ENABLE_ROWWIN is defined, in which case the file is guarded and enabled nothing\nor 32 bit clang or visual c.\n\nat line 42 and 49 it enables functions that are only for clang, so it disables that functions if using LIBYUV_ENABLE_ROWWIN\nline 35 enables Visual C-only functions\ncuriously they dont overlap, and it would be possible to enable both compare_gcc and compare_win when building with lexan.  But it would make more sense to port the visual c only functions to clang",
      "parentUuid": "7a42206b_ce3bd285",
      "revId": "b5d4b66fa33ddd961ca4648623aca2024a029075",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "63301646_5a3122e0",
        "filename": "include/libyuv/cpu_support.h",
        "patchSetId": 29
      },
      "lineNbr": 75,
      "author": {
        "id": 1001562
      },
      "writtenOn": "2025-02-26T00:30:20Z",
      "side": 1,
      "message": "The location of `|| defined(LIBYUV_ENABLE_ROWWIN)` seems wrong here.\n\nThe expression `!defined(__clang__) \u0026\u0026 defined(_MSC_VER)` means it is genuine MSVC, not clang-cl. It seems wrong to insert `|| defined(LIBYUV_ENABLE_ROWWIN)` in the middle of this expression.",
      "revId": "b5d4b66fa33ddd961ca4648623aca2024a029075",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "de9e8a5b_640863f3",
        "filename": "include/libyuv/planar_functions.h",
        "patchSetId": 29
      },
      "lineNbr": 44,
      "author": {
        "id": 1001562
      },
      "writtenOn": "2025-02-26T00:30:20Z",
      "side": 1,
      "message": "Same question as my comment at include/libyuv/compare_row.h:25.\n\nI wonder if this should read:\n\n```\n#if !defined(LIBYUV_DISABLE_X86) \u0026\u0026 \\\n    (defined(_M_IX86) || defined(__x86_64__) || defined(__i386__)) \u0026\u0026 \\\n    !defined(LIBYUV_ENABLE_ROWWIN)\n```",
      "revId": "b5d4b66fa33ddd961ca4648623aca2024a029075",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "16b2188f_83ebbbfe",
        "filename": "include/libyuv/row.h",
        "patchSetId": 29
      },
      "lineNbr": 29,
      "author": {
        "id": 1001562
      },
      "writtenOn": "2025-02-26T00:30:20Z",
      "side": 1,
      "message": "Same question as my comment at include/libyuv/compare_row.h:25.\n\nI wonder if this should read:\n\n```\n#if !defined(LIBYUV_DISABLE_X86) \u0026\u0026 \\\n    (defined(_M_IX86) || defined(__x86_64__) || defined(__i386__)) \u0026\u0026 \\\n    !defined(LIBYUV_ENABLE_ROWWIN)\n```",
      "revId": "b5d4b66fa33ddd961ca4648623aca2024a029075",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0aab2456_9eb6b519",
        "filename": "include/libyuv/row.h",
        "patchSetId": 29
      },
      "lineNbr": 129,
      "author": {
        "id": 1001562
      },
      "writtenOn": "2025-02-26T00:30:20Z",
      "side": 1,
      "message": "Is this expression correct? Note that `!defined(LIBYUV_ENABLE_ROWWIN)` appears twice.",
      "revId": "b5d4b66fa33ddd961ca4648623aca2024a029075",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d8deb9e6_8efc86b3",
        "filename": "include/libyuv/row.h",
        "patchSetId": 29
      },
      "lineNbr": 264,
      "author": {
        "id": 1001562
      },
      "writtenOn": "2025-02-26T00:30:20Z",
      "side": 1,
      "message": "Nit: rowwin \u003d\u003e row_win",
      "revId": "b5d4b66fa33ddd961ca4648623aca2024a029075",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2a8a15aa_b574270f",
        "filename": "include/libyuv/scale_row.h",
        "patchSetId": 29
      },
      "lineNbr": 27,
      "author": {
        "id": 1001562
      },
      "writtenOn": "2025-02-26T00:30:20Z",
      "side": 1,
      "message": "Same question as my comment at include/libyuv/compare_row.h:25.\n\nI wonder if this should read:\n\n```\n#if !defined(LIBYUV_DISABLE_X86) \u0026\u0026 \\\n    (defined(_M_IX86) || defined(__x86_64__) || defined(__i386__)) \u0026\u0026 \\\n    !defined(LIBYUV_ENABLE_ROWWIN)\n```",
      "revId": "b5d4b66fa33ddd961ca4648623aca2024a029075",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "52d18693_49466dee",
        "filename": "source/compare_neon64.cc",
        "patchSetId": 29
      },
      "lineNbr": 119,
      "author": {
        "id": 1001562
      },
      "writtenOn": "2025-02-26T00:30:20Z",
      "side": 1,
      "message": "The indentation seems wrong.",
      "revId": "b5d4b66fa33ddd961ca4648623aca2024a029075",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "55fc2cb1_1d8516e9",
        "filename": "source/compare_win.cc",
        "patchSetId": 29
      },
      "lineNbr": 27,
      "author": {
        "id": 1001562
      },
      "writtenOn": "2025-02-26T00:30:20Z",
      "side": 1,
      "message": "The location of `|| defined(LIBYUV_ENABLE_ROWWIN)` seems wrong here.\n\nThe expression `defined(_MSC_VER) \u0026\u0026 !defined(__clang__)` means it is genuine MSVC, not clang-cl. It seems wrong to insert `|| defined(LIBYUV_ENABLE_ROWWIN)` in the middle of this expression.",
      "revId": "b5d4b66fa33ddd961ca4648623aca2024a029075",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f89342cd_46e2a01d",
        "filename": "source/rotate_win.cc",
        "patchSetId": 29
      },
      "lineNbr": 21,
      "author": {
        "id": 1001562
      },
      "writtenOn": "2025-02-26T00:30:20Z",
      "side": 1,
      "message": "The location of `|| defined(LIBYUV_ENABLE_ROWWIN)` seems wrong here.\n\nThe expression `defined(_MSC_VER) \u0026\u0026 !defined(__clang__)` means it is genuine MSVC, not clang-cl. It seems wrong to insert `|| defined(LIBYUV_ENABLE_ROWWIN)` in the middle of this expression.",
      "revId": "b5d4b66fa33ddd961ca4648623aca2024a029075",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5ff5e788_7c1404c5",
        "filename": "source/row_gcc.cc",
        "patchSetId": 29
      },
      "lineNbr": 490,
      "author": {
        "id": 1001562
      },
      "writtenOn": "2025-02-26T00:30:20Z",
      "side": 1,
      "message": "The indentation of several `asm` lines in this file seems wrong.",
      "revId": "b5d4b66fa33ddd961ca4648623aca2024a029075",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2eaa900a_3dacf16f",
        "filename": "source/row_gcc.cc",
        "patchSetId": 29
      },
      "lineNbr": 4399,
      "author": {
        "id": 1001562
      },
      "writtenOn": "2025-02-26T00:30:20Z",
      "side": 1,
      "message": "The indentation of many `asm` lines in this file seems wrong.",
      "revId": "b5d4b66fa33ddd961ca4648623aca2024a029075",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "69fc3382_f73aab99",
        "filename": "source/row_gcc.cc",
        "patchSetId": 29
      },
      "lineNbr": 4399,
      "author": {
        "id": 1115898
      },
      "writtenOn": "2025-02-26T17:51:11Z",
      "side": 1,
      "message": "yes, unclear why.\non the formatting CLs I did the format several times over to make sure it doesnt degenerate.  And I\u0027m doing clang format on this CL, which you would think would produce the same result.\nIt might be time to ping the clang-format folks",
      "parentUuid": "2eaa900a_3dacf16f",
      "revId": "b5d4b66fa33ddd961ca4648623aca2024a029075",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e1898838_794cd4b0",
        "filename": "source/row_win.cc",
        "patchSetId": 29
      },
      "lineNbr": 16,
      "author": {
        "id": 1001562
      },
      "writtenOn": "2025-02-26T00:30:20Z",
      "side": 1,
      "message": "The location of `|| defined(LIBYUV_ENABLE_ROWWIN)` seems wrong here.\n\nThe expression `defined(_MSC_VER) \u0026\u0026 !defined(__clang__)` means it is genuine MSVC, not clang-cl. It seems wrong to insert `|| defined(LIBYUV_ENABLE_ROWWIN)` in the middle of this expression.",
      "revId": "b5d4b66fa33ddd961ca4648623aca2024a029075",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5fe58d9b_5f33f4e8",
        "filename": "source/scale_gcc.cc",
        "patchSetId": 29
      },
      "lineNbr": 1766,
      "author": {
        "id": 1001562
      },
      "writtenOn": "2025-02-26T00:30:20Z",
      "side": 1,
      "message": "The indentation of several `asm` lines in this file seems wrong.",
      "revId": "b5d4b66fa33ddd961ca4648623aca2024a029075",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a083ab95_3b43c371",
        "filename": "source/scale_win.cc",
        "patchSetId": 29
      },
      "lineNbr": 21,
      "author": {
        "id": 1001562
      },
      "writtenOn": "2025-02-26T00:30:20Z",
      "side": 1,
      "message": "The location of `|| defined(LIBYUV_ENABLE_ROWWIN)` seems wrong here.\n\nThe expression `defined(_MSC_VER) \u0026\u0026 !defined(__clang__)` means it is genuine MSVC, not clang-cl. It seems wrong to insert `|| defined(LIBYUV_ENABLE_ROWWIN)` in the middle of this expression.",
      "revId": "b5d4b66fa33ddd961ca4648623aca2024a029075",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}